# PDF翻译器

一个基于Flask的Web应用，使用DeepLX API进行PDF文档翻译。界面采用左右分栏设计，左侧显示原文，右侧显示译文。

## 功能特点

- 🔑 **多翻译服务支持**：
  - DeepLX API（专业翻译服务）
  - 阿里云通义千问（支持qwen-max/plus/turbo模型）
- 📄 支持PDF文件上传（拖拽或点击上传）
- 👁️ 左侧显示PDF原文件预览（而非提取的文本）
- 🌍 支持多种语言互译（中文、英语、日语、韩语、法语、德语、西班牙语、俄语等）
- 🔄 实时翻译进度显示
- 📊 左右分栏对照显示PDF原文和译文
- 📑 **页码导航功能**：快速跳转到指定页面，支持键盘快捷键
- 🔗 左右两侧页码自动同步
- 📋 一键复制译文到剪贴板
- 💾 **多格式下载**：
  - 下载为TXT文本文件
  - 下载为PDF文档（保留格式）
- 💾 API配置自动保存到浏览器本地存储
- 🎨 现代化的渐变UI设计

## 项目结构

```
PDF_translation/
├── app.py                 # Flask后端主程序
├── requirements.txt       # Python依赖包
├── templates/
│   └── index.html        # 前端HTML页面
└── static/
    ├── css/
    │   └── style.css     # 样式文件
    └── js/
        └── script.js     # JavaScript交互逻辑
```

## 在PyCharm中运行

### 1. 安装依赖

打开PyCharm的终端（Terminal），执行以下命令：

```bash
pip install -r requirements.txt
```

### 2. 运行应用

#### 方法一：直接运行（推荐）

1. 在PyCharm中打开 `app.py` 文件
2. 右键点击文件内容区域
3. 选择 "Run 'app'" 或点击右上角的绿色运行按钮▶️

#### 方法二：使用终端

在PyCharm终端中执行：

```bash
python app.py
```

### 3. 访问应用

运行成功后，在浏览器中访问：

```
http://localhost:5000
```

或

```
http://127.0.0.1:5000
```

## 使用说明

1. **配置API**：

   **选项一：使用DeepLX**
   - 选择"DeepLX"翻译服务
   - 填入完整的API地址，例如：`https://api.deeplx.org/YOUR_KEY/translate`
   - 点击"保存配置"

   **选项二：使用阿里云通义千问**
   - 选择"阿里云 (通义千问)"翻译服务
   - 填入你的阿里云API Key（格式：`sk-xxxxxxxx`）
   - 填入模型名称，常用模型：
     - `qwen-max` - 最新版本，最高质量
     - `qwen-plus` - 推荐，性价比高
     - `qwen-turbo` - 快速响应
     - `qwen2.5-72b-instruct` - 大参数模型
     - 或其他阿里云支持的模型名称
   - 点击"保存配置"

2. **上传PDF**：点击上传区域或拖拽PDF文件到上传框

3. **选择语言**：选择源语言（可选自动检测）和目标语言

4. **开始翻译**：点击"开始翻译"按钮

5. **查看结果**：
   - 左侧显示PDF原文件预览
   - 右侧显示对应的译文

6. **导出结果**：
   - 📋 复制译文到剪贴板
   - 📄 下载为TXT文本文件
   - 📕 下载为PDF文档（支持中文）

## 页码导航使用

### 导航控件
- 每个面板顶部都有页码导航控件
- **◀ 按钮**：上一页
- **▶ 按钮**：下一页
- **页码输入框**：直接输入页码跳转
- **总页数显示**：显示PDF总页数

### 键盘快捷键
- `←` 或 `↑`：上一页
- `→` 或 `↓`：下一页
- `Home`：跳转到第一页
- `End`：跳转到最后一页

### 自动同步
- 点击任一侧的导航按钮，两侧会自动同步
- 滚动译文区域时，页码会自动更新
- PDF预览和译文始终保持同步

## 技术栈

- **后端**：Flask (Python Web框架)
- **PDF处理**：
  - PyPDF2 (读取PDF)
  - ReportLab (生成PDF)
- **翻译API**：
  - DeepLX API
  - 阿里云通义千问
- **前端**：HTML5 + CSS3 + JavaScript (原生)

## 注意事项

- ⚠️ **首次使用必须先配置API**
- 确保网络连接正常
- PDF文件大小限制为16MB
- 仅支持包含可提取文本的PDF（不支持纯图片PDF）
- 翻译质量取决于所选API服务：
  - DeepLX：专业翻译服务，质量高
  - 阿里云：AI大模型翻译，支持上下文理解
- API配置保存在浏览器本地存储中，清除浏览器数据会丢失配置
- 阿里云API调用会产生费用，请注意控制使用量

## 常见问题

### Q: 运行时提示模块未找到？
A: 请确保已安装所有依赖：`pip install -r requirements.txt`

### Q: 无法访问5000端口？
A: 检查端口是否被占用，或修改 `app.py` 中的端口号

### Q: PDF上传后没有内容？
A: 确保PDF包含可提取的文本内容，扫描版PDF需要先进行OCR处理

### Q: 翻译失败？
A: 检查网络连接和DeepLX API是否可用

## 开发者

使用DeepLX API (Beta) 进行翻译服务

## 许可证

MIT License

